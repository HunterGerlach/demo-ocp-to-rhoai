<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>AI Queue Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/ui/styles.css">
  <script src="/ui/app.js" defer></script>
</head>
<body>
  <h1>AI Queue Demo</h1>
  <p>Submit a request, then watch status under <strong>Recent Jobs</strong>. Click a Job ID for full details. Polling every 2s.</p>

  <div class="toolbar">
    <button id="purge" class="danger">Purge DB & Queue</button>
    <span id="purge-status" class="muted"></span>
  </div>

  <div class="grid">
    <fieldset>
      <legend><strong>Iris Classification</strong> ğŸŒº</legend>
      <p class="model-info">
        <strong>Model:</strong> <a href="https://huggingface.co/skops-tests/iris-sklearn-1.0-logistic_regression-without-config" target="_blank">Logistic Regression</a><br/>
        <strong>Dataset:</strong> <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set" target="_blank">Iris flower dataset</a><br/>
        <strong>Purpose:</strong> Predict iris species (setosa, versicolor, virginica) from flower measurements
      </p>
      <div class="input-help">
        <strong>Input:</strong> Flower measurements in centimeters (cm)
        <div class="feature-grid">
          <label>Sepal Length <span class="range">(4.3-7.9)</span>: <input type="number" step="0.01" name="f0" value="5.1" min="3" max="9" /></label>
          <label>Sepal Width <span class="range">(2.0-4.4)</span>: <input type="number" step="0.01" name="f1" value="3.5" min="1" max="6" /></label>
          <label>Petal Length <span class="range">(1.0-6.9)</span>: <input type="number" step="0.01" name="f2" value="1.4" min="0" max="8" /></label>
          <label>Petal Width <span class="range">(0.1-2.5)</span>: <input type="number" step="0.01" name="f3" value="0.2" min="0" max="4" /></label>
        </div>
      </div>
      <form id="iris-form">
        <button type="submit">ğŸ”® Predict Species</button>
        <button type="button" id="iris-rand">ğŸ² Random Values</button>
      </form>
      <div class="output-help">
        <strong>Expected Output:</strong> Species name with confidence score
      </div>
      <pre id="iris-out"></pre>
    </fieldset>

    <fieldset>
      <legend><strong>Diabetes Progression</strong> ğŸ¥</legend>
      <p class="model-info">
        <strong>Model:</strong> <a href="https://huggingface.co/skops-tests/tabularregression-sklearn-latest-hist_gradient_boosting_regressor-with-config-pickle" target="_blank">Gradient Boosting Regressor</a><br/>
        <strong>Dataset:</strong> <a href="https://scikit-learn.org/stable/datasets/toy_dataset.html#diabetes-dataset" target="_blank">Diabetes dataset (scikit-learn)</a><br/>
        <strong>Purpose:</strong> Predict diabetes progression score from physiological measurements
      </p>
      <div class="input-help">
        <strong>Input:</strong> Standardized physiological measurements (mean=0, std=1)
        <small>âš ï¸ All values are standardized - typical range: -2.0 to +2.0</small>
      </div>
      <form id="diab-form">
        <div id="diab-fields"></div>
        <br/>
        <button type="submit">ğŸ“Š Predict Progression</button>
        <button type="button" id="diab-rand">ğŸ² Random Values</button>
      </form>
      <div class="output-help">
        <strong>Expected Output:</strong> Progression score (25-346 range)
      </div>
      <pre id="diab-out"></pre>
    </fieldset>

    <fieldset>
      <legend><strong>YOLO Object Detection</strong> ğŸ“·</legend>
      <p class="model-info">
        <strong>Model:</strong> <a href="https://huggingface.co/ultralytics/yolov8n" target="_blank">YOLOv8n (Ultralytics)</a><br/>
        <strong>Purpose:</strong> Detect and classify objects in images (80+ object classes)<br/>
        <strong>Classes:</strong> person, car, dog, cat, bicycle, airplane, etc.
      </p>
      <div class="input-help">
        <strong>Input:</strong> Image file (JPEG, PNG, etc.)
        <small>âš ï¸ Supported formats: .jpg, .jpeg, .png, .bmp, .tiff | Max size: 5MB</small>
      </div>
      <form id="yolo-form" enctype="multipart/form-data">
        <div class="file-upload-area" id="yolo-drop-zone">
          <input type="file" id="yolo-file" name="image" accept="image/*" style="display: none;">
          <div class="drop-zone-content">
            <p>ğŸ“¸ <strong>Click to select image</strong> or drag & drop</p>
            <p class="file-info" style="display: none;"></p>
            <img class="image-preview" style="display: none; max-width: 200px; max-height: 200px; margin-top: 10px;">
          </div>
        </div>
        <br/>
        <button type="submit" disabled>ğŸ” Detect Objects</button>
        <button type="button" id="yolo-sample">ğŸ–¼ï¸ Load Demo Image</button>
      </form>
      <div class="output-help">
        <strong>Expected Output:</strong> Object detection results or simple image classification (brightness, color analysis) if YOLO unavailable
      </div>
      <pre id="yolo-out"></pre>
    </fieldset>

    <fieldset>
      <legend><strong>Audio Classification</strong> ğŸµ</legend>
      <p class="model-info">
        <strong>Model:</strong> Lightweight Audio Classifier (librosa + scikit-learn)<br/>
        <strong>Purpose:</strong> Classify audio into categories: speech, music, noise, silence<br/>
        <strong>Features:</strong> Extracts spectral features, MFCCs, tempo, and audio characteristics
      </p>
      <div class="input-help">
        <strong>Input:</strong> Audio file (MP3, WAV, etc.)
        <small>âš ï¸ Supported formats: .mp3, .wav, .m4a, .flac, .ogg | Max size: 10MB</small>
      </div>
      <form id="audio-form" enctype="multipart/form-data">
        <div class="file-upload-area" id="audio-drop-zone">
          <input type="file" id="audio-file" name="audio" accept="audio/*" style="display: none;">
          <div class="drop-zone-content">
            <p>ğŸµ <strong>Click to select audio</strong> or drag & drop</p>
            <p class="file-info" style="display: none;"></p>
            <audio class="audio-preview" controls style="display: none; margin-top: 10px; width: 100%;"></audio>
          </div>
        </div>
        <br/>
        <button type="submit" disabled>ğŸ¯ Classify Audio</button>
        <button type="button" id="audio-sample">ğŸ”Š Generate Demo Audio</button>
      </form>
      <div class="output-help">
        <strong>Expected Output:</strong> Audio classification (speech/music/noise/silence) with confidence and features
      </div>
      <pre id="audio-out"></pre>
    </fieldset>
  </div>

  <h2>Recent Jobs</h2>
  <table>
    <thead>
      <tr>
        <th>ID</th><th>Model</th><th>Status</th><th class="nowrap">Result (summary)</th><th>Updated</th>
      </tr>
    </thead>
    <tbody id="jobs"></tbody>
  </table>

  <h2>Selected Job</h2>
  <div id="selected" class="panel">
    <p class="muted">None selected.</p>
  </div>
  <pre id="job-json" class="panel" style="display:none"></pre>
</body>
</html>
